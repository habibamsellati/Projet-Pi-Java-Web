{% extends 'admin/index.html.twig' %}

{% block title %}Modifier un Utilisateur - Dashboard{% endblock %}

{% block admin_main %}

{% block admin_header_title %}Modifier un utilisateur{% endblock %}
{% block admin_header_subtitle %}Mettre à jour les informations du compte{% endblock %}

<div class="form-wrapper-auth">
<div class="form-container-auth">
    <div class="form-card-auth">
        <h1>{{ user.prenom }} <span>{{ user.nom }}</span></h1>
        <p class="form-description-auth">Modifiez les informations de cet utilisateur ci-dessous</p>

        {% for label, messages in app.flashes %}
            {% for message in messages %}
                <div class="flash {{ label }}">{{ message }}</div>
            {% endfor %}
        {% endfor %}

        <form method="POST" action="{{ path('back_user_edit', {'id': user.id}) }}">
            <div class="form-group">
                <label for="prenom">
                    Prénom <span class="required">*</span>
                </label>
                <input type="text" id="prenom" name="prenom" value="{{ user.prenom }}" placeholder="Jean" />
            </div>

            <div class="form-group">
                <label for="nom">
                    Nom <span class="required">*</span>
                </label>
                <input type="text" id="nom" name="nom" value="{{ user.nom }}" placeholder="Dupont" />
            </div>

            <div class="form-group">
                <label for="email">
                    Email <span class="required">*</span>
                </label>
                <input type="email" id="email" name="email" value="{{ user.email }}" placeholder="jean.dupont@example.com" />
            </div>

            <div class="form-group">
                <label for="motdepasse">
                    Mot de passe
                </label>
                <input type="password" id="motdepasse" name="motdepasse" placeholder="••••••••" />
                <div class="password-note">Laissez vide pour ne pas changer le mot de passe</div>
            </div>

            <div class="form-group">
                <label for="role">
                    Rôle <span class="required">*</span>
                </label>
                <select id="role" name="role">
                    <option value="">-- Sélectionner un rôle --</option>
                    {% for role in roles %}
                        <option value="{{ role }}" {% if role == user.role %}selected{% endif %}>
                            {% if role == 'CLIENT' %}
                                Client
                            {% elseif role == 'ARTISANT' %}
                                Artisan
                            {% elseif role == 'ADMIN' %}
                                Administrateur
                            {% elseif role == 'LIVREUR' %}
                                Livreur
                            {% else %}
                                {{ role }}
                            {% endif %}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="statut">
                    Statut <span class="required">*</span>
                </label>
                <select id="statut" name="statut">
                    <option value="actif" {% if user.statut == 'actif' %}selected{% endif %}>Actif</option>
                    <option value="inactif" {% if user.statut == 'inactif' %}selected{% endif %}>Inactif</option>
                </select>
            </div>

            <div class="form-buttons-auth">
                <button type="submit" class="btn-auth btn-primary-auth">Modifier l'utilisateur</button>
            </div>
        </form>
        <div class="form-footer-auth">
            <a href="{{ path('back_users') }}">← Retour à la liste</a>
        </div>
    </div>
</div>
</div>
{% endblock %}
