{% for label, messages in app.flashes %}
  {% for message in messages %}
    <div class="flash {{ label }}">{{ message }}</div>
  {% endfor %}
{% endfor %}

{% set _turnstileSiteKey = turnstile_site_key|default('') %}

<h2>Se connecter</h2>
<p class="form-description">Accedez a votre compte AfkArt</p>

<form action="{{ path('app_login') }}" method="post">
  <div class="form-group">
    <label for="username_modal">Email</label>
    <input type="text" id="username_modal" name="_username" value="{{ last_username|default('') }}" required />
  </div>

  <div class="form-group">
    <label for="password_modal">Mot de passe</label>
    <input type="password" id="password_modal" name="_password" required />
  </div>

  {% if _turnstileSiteKey is not empty %}
    <div class="form-group" style="display:flex; justify-content:center;">
      <div class="cf-turnstile" data-sitekey="{{ _turnstileSiteKey }}"></div>
    </div>
  {% endif %}

  <button type="submit" class="btn btn-primary">Se connecter</button>
</form>
{% if _turnstileSiteKey is not empty %}
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
{% endif %}

<div class="form-footer">
  Pas encore de compte? <a href="#" class="switch-auth" data-target="register">S'inscrire</a>
</div>
