{% extends 'base.back.html.twig' %}

{% block title %}Liste des livraisons - Admin{% endblock %}

{% block admin_container_class %}livraisons-page{% endblock %}

{% block back_main %}
        <header class="header">
            <h1>Liste des Livraisons</h1>
            <p class="header-subtitle">GÃ©rer les livraisons</p>
        </header>
        <div style="margin-bottom: 1rem;">
            <a href="{{ path('back_livraison_new') }}" style="display: inline-block; padding: 0.5rem 1rem; background: #8b5e4a; color: white; border-radius: 8px; text-decoration: none; margin-right: 0.5rem;">Ajouter une livraison</a>
            <a href="{{ path('back_livraison_pdf') }}" style="display: inline-block; padding: 0.5rem 1rem; background: #8b5e4a; color: white; border-radius: 8px; text-decoration: none; margin-right: 0.5rem;">ðŸ“„ PDF</a>
            <a href="{{ path('back_livraison_index', {'order': current_order == 'ASC' ? 'DESC' : 'ASC'}) }}" style="display: inline-block; padding: 0.5rem 1rem; background: #8b5e4a; color: white; border-radius: 8px; text-decoration: none;">{% if current_order == 'ASC' %}ðŸ”½ Trier{% else %}ðŸ”¼ Trier{% endif %}</a>
        </div>
        <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.06);">
            <thead>
                <tr style="background: #f8f6f3;">
                    <th style="padding: 1rem; text-align: left;">Date Livraison</th>
                    <th style="padding: 1rem; text-align: left;">Adresse</th>
                    <th style="padding: 1rem; text-align: left;">Statut</th>
                    <th style="padding: 1rem; text-align: left;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for livraison in livraisons %}
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 1rem;">{{ livraison.datelivraison ? livraison.datelivraison|date('Y-m-d H:i') : '' }}</td>
                    <td style="padding: 1rem;">{{ livraison.addresslivraison }}</td>
                    <td style="padding: 1rem;">{{ livraison.statutlivraison }}</td>
                    <td style="padding: 1rem;">
                        <a href="{{ path('back_livraison_show', {'id': livraison.id}) }}" style="margin-right: 0.5rem; color: #8b5e4a;">Afficher</a>
                        <a href="{{ path('back_livraison_edit', {'id': livraison.id}) }}" style="margin-right: 0.5rem; color: #8b5e4a;">Modifier</a>
                        <form method="post" action="{{ path('back_livraison_delete', {'id': livraison.id}) }}" style="display: inline;" onsubmit="return confirm('Supprimer cette livraison ?');">
                            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ livraison.id) }}">
                            <button type="submit" style="background: none; border: none; color: #dc3545; cursor: pointer;">Supprimer</button>
                        </form>
                    </td>
                </tr>
                {% else %}
                <tr><td colspan="4" style="padding: 2rem; text-align: center; color: #666;">Aucune livraison.</td></tr>
                {% endfor %}
            </tbody>
        </table>
{% endblock %}
